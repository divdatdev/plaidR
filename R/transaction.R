# The Plaid API
#
# The Plaid REST API. Please see https://plaid.com/docs/api for more details.
#
# The version of the OpenAPI document: 2020-09-14_1.146.0
# Generated by: https://openapi-generator.tech

#' @docType class
#' @title Transaction
#'
#' @description Transaction Class
#'
#' @format An \code{R6Class} generator object
#'
#' @field transaction_type  character [optional]
#'
#' @field pending_transaction_id  character 
#'
#' @field category_id  character 
#'
#' @field category  list( character ) 
#'
#' @field location  \link{Location} 
#'
#' @field payment_meta  \link{PaymentMeta} 
#'
#' @field account_owner  character 
#'
#' @field name  character 
#'
#' @field original_description  character [optional]
#'
#' @field account_id  character 
#'
#' @field amount  numeric 
#'
#' @field iso_currency_code  character 
#'
#' @field unofficial_currency_code  character 
#'
#' @field date  character 
#'
#' @field pending  character 
#'
#' @field transaction_id  character 
#'
#' @field merchant_name  character [optional]
#'
#' @field check_number  character [optional]
#'
#' @field payment_channel  character 
#'
#' @field authorized_date  character 
#'
#' @field authorized_datetime  character 
#'
#' @field datetime  character 
#'
#' @field transaction_code  \link{TransactionCode} 
#'
#' @field personal_finance_category  \link{PersonalFinanceCategory} [optional]
#'
#' @importFrom R6 R6Class
#' @importFrom jsonlite fromJSON toJSON
#' @export
Transaction <- R6::R6Class(
  'Transaction',
  public = list(
    `transaction_type` = NULL,
    `pending_transaction_id` = NULL,
    `category_id` = NULL,
    `category` = NULL,
    `location` = NULL,
    `payment_meta` = NULL,
    `account_owner` = NULL,
    `name` = NULL,
    `original_description` = NULL,
    `account_id` = NULL,
    `amount` = NULL,
    `iso_currency_code` = NULL,
    `unofficial_currency_code` = NULL,
    `date` = NULL,
    `pending` = NULL,
    `transaction_id` = NULL,
    `merchant_name` = NULL,
    `check_number` = NULL,
    `payment_channel` = NULL,
    `authorized_date` = NULL,
    `authorized_datetime` = NULL,
    `datetime` = NULL,
    `transaction_code` = NULL,
    `personal_finance_category` = NULL,
    initialize = function(
        `pending_transaction_id`, `category_id`, `category`, `location`, `payment_meta`, `account_owner`, `name`, `account_id`, `amount`, `iso_currency_code`, `unofficial_currency_code`, `date`, `pending`, `transaction_id`, `payment_channel`, `authorized_date`, `authorized_datetime`, `datetime`, `transaction_code`, `transaction_type`=NULL, `original_description`=NULL, `merchant_name`=NULL, `check_number`=NULL, `personal_finance_category`=NULL, ...
    ) {
      local.optional.var <- list(...)
      if (!missing(`pending_transaction_id`)) {
        stopifnot(is.character(`pending_transaction_id`), length(`pending_transaction_id`) == 1)
        self$`pending_transaction_id` <- `pending_transaction_id`
      }
      if (!missing(`category_id`)) {
        stopifnot(is.character(`category_id`), length(`category_id`) == 1)
        self$`category_id` <- `category_id`
      }
      if (!missing(`category`)) {
        stopifnot(is.vector(`category`), length(`category`) != 0)
        sapply(`category`, function(x) stopifnot(is.character(x)))
        self$`category` <- `category`
      }
      if (!missing(`location`)) {
        stopifnot(R6::is.R6(`location`))
        self$`location` <- `location`
      }
      if (!missing(`payment_meta`)) {
        stopifnot(R6::is.R6(`payment_meta`))
        self$`payment_meta` <- `payment_meta`
      }
      if (!missing(`account_owner`)) {
        stopifnot(is.character(`account_owner`), length(`account_owner`) == 1)
        self$`account_owner` <- `account_owner`
      }
      if (!missing(`name`)) {
        stopifnot(is.character(`name`), length(`name`) == 1)
        self$`name` <- `name`
      }
      if (!missing(`account_id`)) {
        stopifnot(is.character(`account_id`), length(`account_id`) == 1)
        self$`account_id` <- `account_id`
      }
      if (!missing(`amount`)) {
        stopifnot(is.numeric(`amount`), length(`amount`) == 1)
        self$`amount` <- `amount`
      }
      if (!missing(`iso_currency_code`)) {
        stopifnot(is.character(`iso_currency_code`), length(`iso_currency_code`) == 1)
        self$`iso_currency_code` <- `iso_currency_code`
      }
      if (!missing(`unofficial_currency_code`)) {
        stopifnot(is.character(`unofficial_currency_code`), length(`unofficial_currency_code`) == 1)
        self$`unofficial_currency_code` <- `unofficial_currency_code`
      }
      if (!missing(`date`)) {
        stopifnot(is.character(`date`), length(`date`) == 1)
        self$`date` <- `date`
      }
      if (!missing(`pending`)) {
        stopifnot(is.logical(`pending`), length(`pending`) == 1)
        self$`pending` <- `pending`
      }
      if (!missing(`transaction_id`)) {
        stopifnot(is.character(`transaction_id`), length(`transaction_id`) == 1)
        self$`transaction_id` <- `transaction_id`
      }
      if (!missing(`payment_channel`)) {
        stopifnot(is.character(`payment_channel`), length(`payment_channel`) == 1)
        self$`payment_channel` <- `payment_channel`
      }
      if (!missing(`authorized_date`)) {
        stopifnot(is.character(`authorized_date`), length(`authorized_date`) == 1)
        self$`authorized_date` <- `authorized_date`
      }
      if (!missing(`authorized_datetime`)) {
        stopifnot(is.character(`authorized_datetime`), length(`authorized_datetime`) == 1)
        self$`authorized_datetime` <- `authorized_datetime`
      }
      if (!missing(`datetime`)) {
        stopifnot(is.character(`datetime`), length(`datetime`) == 1)
        self$`datetime` <- `datetime`
      }
      if (!missing(`transaction_code`)) {
        stopifnot(R6::is.R6(`transaction_code`))
        self$`transaction_code` <- `transaction_code`
      }
      if (!is.null(`transaction_type`)) {
        stopifnot(is.character(`transaction_type`), length(`transaction_type`) == 1)
        self$`transaction_type` <- `transaction_type`
      }
      if (!is.null(`original_description`)) {
        stopifnot(is.character(`original_description`), length(`original_description`) == 1)
        self$`original_description` <- `original_description`
      }
      if (!is.null(`merchant_name`)) {
        stopifnot(is.character(`merchant_name`), length(`merchant_name`) == 1)
        self$`merchant_name` <- `merchant_name`
      }
      if (!is.null(`check_number`)) {
        stopifnot(is.character(`check_number`), length(`check_number`) == 1)
        self$`check_number` <- `check_number`
      }
      if (!is.null(`personal_finance_category`)) {
        stopifnot(R6::is.R6(`personal_finance_category`))
        self$`personal_finance_category` <- `personal_finance_category`
      }
    },
    toJSON = function() {
      TransactionObject <- list()
      if (!is.null(self$`transaction_type`)) {
        TransactionObject[['transaction_type']] <-
          self$`transaction_type`
      }
      if (!is.null(self$`pending_transaction_id`)) {
        TransactionObject[['pending_transaction_id']] <-
          self$`pending_transaction_id`
      }
      if (!is.null(self$`category_id`)) {
        TransactionObject[['category_id']] <-
          self$`category_id`
      }
      if (!is.null(self$`category`)) {
        TransactionObject[['category']] <-
          self$`category`
      }
      if (!is.null(self$`location`)) {
        TransactionObject[['location']] <-
          self$`location`$toJSON()
      }
      if (!is.null(self$`payment_meta`)) {
        TransactionObject[['payment_meta']] <-
          self$`payment_meta`$toJSON()
      }
      if (!is.null(self$`account_owner`)) {
        TransactionObject[['account_owner']] <-
          self$`account_owner`
      }
      if (!is.null(self$`name`)) {
        TransactionObject[['name']] <-
          self$`name`
      }
      if (!is.null(self$`original_description`)) {
        TransactionObject[['original_description']] <-
          self$`original_description`
      }
      if (!is.null(self$`account_id`)) {
        TransactionObject[['account_id']] <-
          self$`account_id`
      }
      if (!is.null(self$`amount`)) {
        TransactionObject[['amount']] <-
          self$`amount`
      }
      if (!is.null(self$`iso_currency_code`)) {
        TransactionObject[['iso_currency_code']] <-
          self$`iso_currency_code`
      }
      if (!is.null(self$`unofficial_currency_code`)) {
        TransactionObject[['unofficial_currency_code']] <-
          self$`unofficial_currency_code`
      }
      if (!is.null(self$`date`)) {
        TransactionObject[['date']] <-
          self$`date`
      }
      if (!is.null(self$`pending`)) {
        TransactionObject[['pending']] <-
          self$`pending`
      }
      if (!is.null(self$`transaction_id`)) {
        TransactionObject[['transaction_id']] <-
          self$`transaction_id`
      }
      if (!is.null(self$`merchant_name`)) {
        TransactionObject[['merchant_name']] <-
          self$`merchant_name`
      }
      if (!is.null(self$`check_number`)) {
        TransactionObject[['check_number']] <-
          self$`check_number`
      }
      if (!is.null(self$`payment_channel`)) {
        TransactionObject[['payment_channel']] <-
          self$`payment_channel`
      }
      if (!is.null(self$`authorized_date`)) {
        TransactionObject[['authorized_date']] <-
          self$`authorized_date`
      }
      if (!is.null(self$`authorized_datetime`)) {
        TransactionObject[['authorized_datetime']] <-
          self$`authorized_datetime`
      }
      if (!is.null(self$`datetime`)) {
        TransactionObject[['datetime']] <-
          self$`datetime`
      }
      if (!is.null(self$`transaction_code`)) {
        TransactionObject[['transaction_code']] <-
          self$`transaction_code`$toJSON()
      }
      if (!is.null(self$`personal_finance_category`)) {
        TransactionObject[['personal_finance_category']] <-
          self$`personal_finance_category`$toJSON()
      }

      TransactionObject
    },
    fromJSON = function(TransactionJson) {
      TransactionObject <- jsonlite::fromJSON(TransactionJson)
      if (!is.null(TransactionObject$`transaction_type`)) {
        self$`transaction_type` <- TransactionObject$`transaction_type`
      }
      if (!is.null(TransactionObject$`pending_transaction_id`)) {
        self$`pending_transaction_id` <- TransactionObject$`pending_transaction_id`
      }
      if (!is.null(TransactionObject$`category_id`)) {
        self$`category_id` <- TransactionObject$`category_id`
      }
      if (!is.null(TransactionObject$`category`)) {
        self$`category` <- ApiClient$new()$deserializeObj(TransactionObject$`category`, "array[character]", loadNamespace("plaidr"))
      }
      if (!is.null(TransactionObject$`location`)) {
        locationObject <- Location$new()
        locationObject$fromJSON(jsonlite::toJSON(TransactionObject$location, auto_unbox = TRUE, digits = NA))
        self$`location` <- locationObject
      }
      if (!is.null(TransactionObject$`payment_meta`)) {
        payment_metaObject <- PaymentMeta$new()
        payment_metaObject$fromJSON(jsonlite::toJSON(TransactionObject$payment_meta, auto_unbox = TRUE, digits = NA))
        self$`payment_meta` <- payment_metaObject
      }
      if (!is.null(TransactionObject$`account_owner`)) {
        self$`account_owner` <- TransactionObject$`account_owner`
      }
      if (!is.null(TransactionObject$`name`)) {
        self$`name` <- TransactionObject$`name`
      }
      if (!is.null(TransactionObject$`original_description`)) {
        self$`original_description` <- TransactionObject$`original_description`
      }
      if (!is.null(TransactionObject$`account_id`)) {
        self$`account_id` <- TransactionObject$`account_id`
      }
      if (!is.null(TransactionObject$`amount`)) {
        self$`amount` <- TransactionObject$`amount`
      }
      if (!is.null(TransactionObject$`iso_currency_code`)) {
        self$`iso_currency_code` <- TransactionObject$`iso_currency_code`
      }
      if (!is.null(TransactionObject$`unofficial_currency_code`)) {
        self$`unofficial_currency_code` <- TransactionObject$`unofficial_currency_code`
      }
      if (!is.null(TransactionObject$`date`)) {
        self$`date` <- TransactionObject$`date`
      }
      if (!is.null(TransactionObject$`pending`)) {
        self$`pending` <- TransactionObject$`pending`
      }
      if (!is.null(TransactionObject$`transaction_id`)) {
        self$`transaction_id` <- TransactionObject$`transaction_id`
      }
      if (!is.null(TransactionObject$`merchant_name`)) {
        self$`merchant_name` <- TransactionObject$`merchant_name`
      }
      if (!is.null(TransactionObject$`check_number`)) {
        self$`check_number` <- TransactionObject$`check_number`
      }
      if (!is.null(TransactionObject$`payment_channel`)) {
        self$`payment_channel` <- TransactionObject$`payment_channel`
      }
      if (!is.null(TransactionObject$`authorized_date`)) {
        self$`authorized_date` <- TransactionObject$`authorized_date`
      }
      if (!is.null(TransactionObject$`authorized_datetime`)) {
        self$`authorized_datetime` <- TransactionObject$`authorized_datetime`
      }
      if (!is.null(TransactionObject$`datetime`)) {
        self$`datetime` <- TransactionObject$`datetime`
      }
      if (!is.null(TransactionObject$`transaction_code`)) {
        transaction_codeObject <- TransactionCode$new()
        transaction_codeObject$fromJSON(jsonlite::toJSON(TransactionObject$transaction_code, auto_unbox = TRUE, digits = NA))
        self$`transaction_code` <- transaction_codeObject
      }
      if (!is.null(TransactionObject$`personal_finance_category`)) {
        personal_finance_categoryObject <- PersonalFinanceCategory$new()
        personal_finance_categoryObject$fromJSON(jsonlite::toJSON(TransactionObject$personal_finance_category, auto_unbox = TRUE, digits = NA))
        self$`personal_finance_category` <- personal_finance_categoryObject
      }
      self
    },
    toJSONString = function() {
      jsoncontent <- c(
        if (!is.null(self$`transaction_type`)) {
        sprintf(
        '"transaction_type":
          "%s"
                ',
        self$`transaction_type`
        )},
        if (!is.null(self$`pending_transaction_id`)) {
        sprintf(
        '"pending_transaction_id":
          "%s"
                ',
        self$`pending_transaction_id`
        )},
        if (!is.null(self$`category_id`)) {
        sprintf(
        '"category_id":
          "%s"
                ',
        self$`category_id`
        )},
        if (!is.null(self$`category`)) {
        sprintf(
        '"category":
           [%s]
        ',
        paste(unlist(lapply(self$`category`, function(x) paste0('"', x, '"'))), collapse=",")
        )},
        if (!is.null(self$`location`)) {
        sprintf(
        '"location":
        %s
        ',
        jsonlite::toJSON(self$`location`$toJSON(), auto_unbox=TRUE, digits = NA)
        )},
        if (!is.null(self$`payment_meta`)) {
        sprintf(
        '"payment_meta":
        %s
        ',
        jsonlite::toJSON(self$`payment_meta`$toJSON(), auto_unbox=TRUE, digits = NA)
        )},
        if (!is.null(self$`account_owner`)) {
        sprintf(
        '"account_owner":
          "%s"
                ',
        self$`account_owner`
        )},
        if (!is.null(self$`name`)) {
        sprintf(
        '"name":
          "%s"
                ',
        self$`name`
        )},
        if (!is.null(self$`original_description`)) {
        sprintf(
        '"original_description":
          "%s"
                ',
        self$`original_description`
        )},
        if (!is.null(self$`account_id`)) {
        sprintf(
        '"account_id":
          "%s"
                ',
        self$`account_id`
        )},
        if (!is.null(self$`amount`)) {
        sprintf(
        '"amount":
          %d
                ',
        self$`amount`
        )},
        if (!is.null(self$`iso_currency_code`)) {
        sprintf(
        '"iso_currency_code":
          "%s"
                ',
        self$`iso_currency_code`
        )},
        if (!is.null(self$`unofficial_currency_code`)) {
        sprintf(
        '"unofficial_currency_code":
          "%s"
                ',
        self$`unofficial_currency_code`
        )},
        if (!is.null(self$`date`)) {
        sprintf(
        '"date":
          "%s"
                ',
        self$`date`
        )},
        if (!is.null(self$`pending`)) {
        sprintf(
        '"pending":
          %s
                ',
        tolower(self$`pending`)
        )},
        if (!is.null(self$`transaction_id`)) {
        sprintf(
        '"transaction_id":
          "%s"
                ',
        self$`transaction_id`
        )},
        if (!is.null(self$`merchant_name`)) {
        sprintf(
        '"merchant_name":
          "%s"
                ',
        self$`merchant_name`
        )},
        if (!is.null(self$`check_number`)) {
        sprintf(
        '"check_number":
          "%s"
                ',
        self$`check_number`
        )},
        if (!is.null(self$`payment_channel`)) {
        sprintf(
        '"payment_channel":
          "%s"
                ',
        self$`payment_channel`
        )},
        if (!is.null(self$`authorized_date`)) {
        sprintf(
        '"authorized_date":
          "%s"
                ',
        self$`authorized_date`
        )},
        if (!is.null(self$`authorized_datetime`)) {
        sprintf(
        '"authorized_datetime":
          "%s"
                ',
        self$`authorized_datetime`
        )},
        if (!is.null(self$`datetime`)) {
        sprintf(
        '"datetime":
          "%s"
                ',
        self$`datetime`
        )},
        if (!is.null(self$`transaction_code`)) {
        sprintf(
        '"transaction_code":
        %s
        ',
        jsonlite::toJSON(self$`transaction_code`$toJSON(), auto_unbox=TRUE, digits = NA)
        )},
        if (!is.null(self$`personal_finance_category`)) {
        sprintf(
        '"personal_finance_category":
        %s
        ',
        jsonlite::toJSON(self$`personal_finance_category`$toJSON(), auto_unbox=TRUE, digits = NA)
        )}
      )
      jsoncontent <- paste(jsoncontent, collapse = ",")
      paste('{', jsoncontent, '}', sep = "")
    },
    fromJSONString = function(TransactionJson) {
      TransactionObject <- jsonlite::fromJSON(TransactionJson)
      self$`transaction_type` <- TransactionObject$`transaction_type`
      self$`pending_transaction_id` <- TransactionObject$`pending_transaction_id`
      self$`category_id` <- TransactionObject$`category_id`
      self$`category` <- ApiClient$new()$deserializeObj(TransactionObject$`category`, "array[character]", loadNamespace("plaidr"))
      self$`location` <- Location$new()$fromJSON(jsonlite::toJSON(TransactionObject$location, auto_unbox = TRUE, digits = NA))
      self$`payment_meta` <- PaymentMeta$new()$fromJSON(jsonlite::toJSON(TransactionObject$payment_meta, auto_unbox = TRUE, digits = NA))
      self$`account_owner` <- TransactionObject$`account_owner`
      self$`name` <- TransactionObject$`name`
      self$`original_description` <- TransactionObject$`original_description`
      self$`account_id` <- TransactionObject$`account_id`
      self$`amount` <- TransactionObject$`amount`
      self$`iso_currency_code` <- TransactionObject$`iso_currency_code`
      self$`unofficial_currency_code` <- TransactionObject$`unofficial_currency_code`
      self$`date` <- TransactionObject$`date`
      self$`pending` <- TransactionObject$`pending`
      self$`transaction_id` <- TransactionObject$`transaction_id`
      self$`merchant_name` <- TransactionObject$`merchant_name`
      self$`check_number` <- TransactionObject$`check_number`
      self$`payment_channel` <- TransactionObject$`payment_channel`
      self$`authorized_date` <- TransactionObject$`authorized_date`
      self$`authorized_datetime` <- TransactionObject$`authorized_datetime`
      self$`datetime` <- TransactionObject$`datetime`
      self$`transaction_code` <- TransactionCode$new()$fromJSON(jsonlite::toJSON(TransactionObject$transaction_code, auto_unbox = TRUE, digits = NA))
      self$`personal_finance_category` <- PersonalFinanceCategory$new()$fromJSON(jsonlite::toJSON(TransactionObject$personal_finance_category, auto_unbox = TRUE, digits = NA))
      self
    }
  )
)
